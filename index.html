<!DOCTYPE html> 
<html>
<head>
  <meta charset="UTF-8">
	<title>AppcIbono</title>
	<link rel="stylesheet" href="css/jquery.mobile.1.3.1.min.css"/>
	<style>
#scanButton
{
   position:absolute;
   top:3px;
   left:3px;
   z-index:2;
}

.page
{
   position:absolute;
   top:30px;
   left:0px;
   width:100%;
   height:100%;
   z-index:1;
}

#page2,
#page3,
#page4
{
	visibility:hidden;
}

#page2
{
	background-color:red;
}

#page3
{
	background-color:yellow;
}

#page4
{
	background-color:blue;
}
</style>
	<!-- This is needed to access the PhoneGap JavaScript -->
	<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
	<!-- This is needed to access the QR Code plugin JavaScript -->
	<script src="barcodescanner.js"></script>   
	  <script type="text/javascript">
function scanQR(){
var scanner = cordova.require("cordova/plugin/BarcodeScanner");
scanner.scan(
    function (result) 
	{
		//hideAllPages();
		alert("dato=="+result.text);
	    if(result.text == "page2")
	    {
	        document.getElementById('page2').style.visibility = 'visible';
	        window.location.hash="#page2";
	    }
	    else if(result.text == "page3")
	    {
	        document.getElementById('page3').style.visibility = 'visible';			
	        window.location.hash="#page3";
	    }
	    else if(result.text == "page4")
	    {
	        document.getElementById('page4').style.visibility = 'visible';			
	        window.location.hash="#page4";
	    }
		else
		{
            alert("Not a valid QR Code for this application="+result);
		}
    }, 
        function (error) 
	    {
            alert("Scanning failed: " + error);
        }
    );
};

/* Helper for this example that hides all four pages */
function hideAllPages()
{
	document.getElementById('page1').style.visibility = 'hidden';
	document.getElementById('page2').style.visibility = 'hidden';
	document.getElementById('page3').style.visibility = 'hidden';		
	document.getElementById('page4').style.visibility = 'hidden';
}

</script>
  
  
<!-- the javascript specifically for this application -->
<style type="text/css">
       
	   .contenido{
          background-image: url('images/bg_log_in.png');
		  //background-repeat: repeat-x;//
		   background-repeat: no-repeat;
	   }
	   .colortext{
	    color:#fff;
		text-align: center;
	   }
	   .logo{
	      background-image: url('images/log_in_logo.png');
		  background-repeat: no-repeat;
		  width: 134px;
		  height: 144px;
		  margin-left: auto;
          margin-right: auto;
	   }	   
</style>
<!--<script type="text/javascript" src="index.js"></script>-->

<script src="jquery.1.9.1.min.js"></script>
<script src="jquery.mobile-1.3.1.min.js"></script>

</head>
 
<body> 
 
<div data-role="page" id="inicio" class="contenido">
 
	<div data-role="header">
		<h1>Autenticacion de Usuario</h1>
	</div>
    
	<div data-role="content">	
		<form id="formulario">
		<div class="logo" align="center"></div>
		<br><br><br>
	
  
      			<div class="colortext"> Usuario</div>
      			<input type="text" id="nombredeusuario" name="nombredeusuario">
                <br>
      			<div class="colortext"> Clave </div>
     			<input type="password" id="clave" name="clave" >
				<br>
 
 
      			<input type="submit" value="Login" id="botonLogin" onclick="login();">
      
    		</form>		
			
	</div>
	 
</div>
 
<div data-role="page" id="scan" class="contenido">
 
	<div data-role="header">
		<h1>Bienvenido</h1>
	</div>
 
	<div data-role="content">	

	<button id = "scanButton" onclick="scanQR();">Scannear QR</button>
    <p>
    <h3>Numero de cedula:</h3>
    <p>
    <input type="text" value="" id="cedula" name="cedula" />
    <p>
    <h3>Resultado:</h3>
    <p>
    <input type="text" value="" id="resultado" name="resultado" />	
	<p>
	<input type="submit" value="Cerrar sesión" id="cerrar" onclick="closeapp()"/>
	</div>
	
</div>
<div data-role="page" id="menucontrolscan" class="contenido">
 
	<div data-role="header">
		<h1>Control de acceso</h1>
	</div>
 
	<div data-role="content">	

	<button id = "scanButton" onclick="scanQR();">Scannear código QR</button>
	<button id = "scanButton" onclick="scanQR();">Validar cédula del funcionario</button>
	<button id = "scanButton" onclick="scanQR();">Usuario anonimo</button>
    <p>  
	<input type="submit" value="Cerrar sesión" id="cerrar" onclick="closeapp()"/>
	</div>	
</div>

<!-- home -->
<div data-role="page" id="home" class="contenido">

	<div data-role="header">
		<h1>Bienvenido</h1>
	</div>
    <br><br>
    <li data-section="Widgets" data-filtertext="selectmenus custom native multiple optgroup disabled forms" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="false" data-iconpos="right" data-theme="d" class="ui-btn ui-btn-up-d ui-btn-icon-right ui-li-has-arrow ui-li">
	<div class="ui-btn-inner ui-li">
	<div class="ui-btn-text">
	<a href="#menucontrol" class="ui-link-inherit">Control de acceso</a>
	</div>
	</div>
	</li>
	<br>
	<li data-section="Widgets" data-filtertext="selectmenus custom native multiple optgroup disabled forms" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="false" data-iconpos="right" data-theme="d" class="ui-btn ui-btn-up-d ui-btn-icon-right ui-li-has-arrow ui-li">
	<div class="ui-btn-inner ui-li">
	<div class="ui-btn-text">
	<a href="#scan" class="ui-link-inherit">Servicio de restaurante</a>
	</div>
	</div>
	</li>

</div>

<div data-role="page" id="menucontrol" class="contenido">
 
	<div data-role="header">
		<h1>Sus eventos son:</h1>
	</div>
 
	<div data-role="content">	

<li data-section="Widgets" data-filtertext="selectmenus custom native multiple optgroup disabled forms" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="false" data-iconpos="right" data-theme="d" class="ui-btn ui-btn-up-d ui-btn-icon-right ui-li-has-arrow ui-li">
	<div class="ui-btn-inner ui-li">
	<div class="ui-btn-text">
	<a href="#menucontrolscan" class="ui-link-inherit">Evento1</a>
	</div>
	</div>
	</li>
	
    <p>  
	<input type="submit" value="Cerrar sesión" id="cerrar" onclick="closeapp()"/>
	</div>	
</div>




 
<script>
function closeapp(){
    document.getElementById("nombredeusuario").value="";
	document.getElementById("clave").value="";
    $.mobile.changePage("#inicio");
}
$('#formulario').submit(function() { 
	
	 
	// recolecta los valores que inserto el usuario
	var datosUsuario = $("#nombredeusuario").val()
	var datosPassword = $("#clave").val()
	
  	archivoValidacion = "http://revolucion.mobi/ejemplos/phonegap/envioFormulario/validacion_de_datos.php?jsoncallback=?"
 
	if(datosUsuario=="nexos" && datosPassword=="nexos"){
	  document.getElementById("cedula").value="";
	  document.getElementById("resultado").value="";
	  $.mobile.changePage("#home");	  
	}
	else{
	  alert("El usuario no es valido intenta de nuevo!");
	}
	return false;
})
	
</script>
 
</body>
</html>